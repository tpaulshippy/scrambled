<div id="game_status" class="h-full">
  <div class="bg-white border border-gray-200 rounded-xl p-3 sm:p-2 md:p-2 text-center h-full flex flex-col">
    <% if game.waiting? %>
      <div class="flex flex-col items-center justify-center h-full min-h-0">
        <div class="text-lg sm:text-xl md:text-3xl font-bold text-gray-900 mb-3 sm:mb-4">Waiting for Players</div>
        <p class="text-sm sm:text-base md:text-xl text-gray-600 mb-4 sm:mb-6">Ready to start when you are!</p>
        
        <% current_player = local_assigns[:current_player] %>

        <% if current_player&.game == game && !current_player.ready? %>
          <button id="ready-btn" data-action="click->scramble#markReady"
                  class="bg-green-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl text-sm sm:text-base font-semibold hover:bg-green-700 transition-all duration-200 shadow-lg hover:shadow-xl">
            Ready to Play!
          </button>
        <% elsif current_player&.ready? %>
          <div class="text-green-600 font-semibold text-lg sm:text-xl">âœ“ You're ready!</div>
        <% end %>
      </div>
      
    <% elsif game.countdown? %>
      <div class="flex flex-col items-center justify-center h-full min-h-0">
        <div id="countdown" class="text-4xl sm:text-6xl md:text-8xl font-bold text-red-500 mb-3 sm:mb-4">3</div>
        <p class="text-sm sm:text-base md:text-xl text-gray-600">Get ready...</p>
      </div>
      
    <% elsif game.playing? %>
      <div class="h-full p-1 space-y-2">
        <!-- Header -->
        <div class="text-center">
          <span class="text-xs text-gray-500">Round <%= game.round_number %> - Unscramble this word:</span>
        </div>
        
        <!-- Letter tiles -->
        <div id="scrambled-word">
          <div class="flex justify-center flex-wrap gap-1">
            <% game.scrambled_word.chars.each_with_index do |letter, index| %>
              <div class="letter-tile bg-blue-100 border-2 border-blue-300 w-8 h-8 flex items-center justify-center text-sm font-bold text-blue-900 rounded-lg cursor-pointer hover:bg-blue-200 transition-all duration-200"
                  data-letter="<%= letter %>" data-position="<%= index %>" data-action="click->scramble#selectLetter">
                <%= letter.upcase %>
              </div>
            <% end %>
          </div>
        </div>
        
        <!-- Answer area -->
        <div id="answer-area">
          <div class="text-xs text-gray-500 text-center mb-1">Your answer:</div>
          <div id="answer-tiles" data-scramble-target="answerTiles" class="flex justify-center flex-wrap gap-1 min-h-[4.5rem] bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-1 items-center">
          </div>
        </div>
        
        <!-- Buttons -->
        <div class="flex justify-center space-x-3 pb-1">
          <button data-action="click->scramble#clearAnswer"
                  class="bg-gray-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-gray-600 transition-all duration-200">
            Clear
          </button>
          <button data-action="click->scramble#submitAnswer"
                  class="bg-blue-600 text-white px-4 py-1.5 rounded-lg text-sm font-medium hover:bg-blue-700 transition-all duration-200">
            Submit Answer
          </button>
        </div>
        
        <!-- Feedback section -->
        <div data-scramble-target="feedback" style="display: none;" class="p-1 sm:p-2 rounded-lg text-center text-xs flex-shrink-0">
        </div>
      </div>
      
    <% elsif game.finished? %>
      <div class="flex flex-col items-center justify-center h-full min-h-0">
        <div class="text-lg sm:text-2xl md:text-4xl font-bold text-green-600 mb-3 sm:mb-4">ðŸŽ‰ Game Over!</div>
        <% if game.winner %>
          <p class="text-sm sm:text-lg md:text-2xl text-gray-900 mb-2 sm:mb-3">Winner: <strong><%= game.winner.nickname %></strong></p>
          <p class="text-xs sm:text-base md:text-xl text-gray-600 mb-4 sm:mb-6">Final Score: <%= game.winner.score %></p>
        <% end %>
        
        <div class="mt-3 sm:mt-4">
          <%= link_to "Play Again", new_game_path, 
              class: "bg-blue-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl text-sm sm:text-base font-semibold hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl" %>
        </div>
      </div>
    <% end %>
  </div>
</div>