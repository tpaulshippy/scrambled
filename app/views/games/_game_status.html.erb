<div id="game_status">
  <div class="bg-white border border-gray-200 rounded-lg p-6 text-center">
    <% if game.waiting? %>
      <div class="text-2xl font-bold text-gray-900 mb-4">Waiting for Players</div>
      <p class="text-gray-600 mb-4">Ready to start when you are!</p>
      
      <% current_player = local_assigns[:current_player] %>

      <% if current_player&.game == game && !current_player.ready? %>
        <button id="ready-btn" data-action="click->scramble#markReady"
                class="bg-green-600 text-white px-6 py-3 rounded-lg text-lg font-semibold hover:bg-green-700 transition">
          Ready to Play!
        </button>
      <% elsif current_player&.ready? %>
        <div class="text-green-600 font-semibold text-lg">âœ“ You're ready!</div>
      <% end %>
      
    <% elsif game.countdown? %>
      <div id="countdown" class="text-6xl font-bold text-red-500 mb-4">3</div>
      <p class="text-gray-600">Get ready...</p>
      
    <% elsif game.playing? %>
      <div class="mb-6">
        <div class="text-sm text-gray-500 mb-2">Round <%= game.round_number %></div>
        <div class="text-lg text-gray-700 mb-4">Unscramble this word:</div>
        
        <div id="scrambled-word" class="mb-6">
          <div class="flex justify-center space-x-2 mb-4">
            <% game.scrambled_word.chars.each_with_index do |letter, index| %>
              <div class="letter-tile bg-blue-100 border-2 border-blue-300 w-12 h-12 flex items-center justify-center text-xl font-bold text-blue-900 rounded cursor-pointer hover:bg-blue-200 transition"
                  data-letter="<%= letter %>" data-position="<%= index %>" data-action="click->scramble#selectLetter">
                <%= letter.upcase %>
              </div>
            <% end %>
          </div>
        </div>
        
        <div id="answer-area" class="mb-6">
          <div class="text-sm text-gray-500 mb-2">Your answer:</div>
          <div id="answer-tiles" data-scramble-target="answerTiles" class="flex justify-center space-x-2 min-h-[3rem] bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-2">
          </div>
        </div>
        
        <div class="flex justify-center space-x-4">
          <button data-action="click->scramble#clearAnswer"
                  class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition">
            Clear
          </button>
          <button data-action="click->scramble#submitAnswer"
                  class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">
            Submit Answer
          </button>
        </div>
        
        <div data-scramble-target="feedback" style="display: none;" class="mt-2 p-2 rounded text-center">
        </div>
      </div>
      
    <% elsif game.finished? %>
      <div class="text-3xl font-bold text-green-600 mb-4">ðŸŽ‰ Game Over!</div>
      <% if game.winner %>
        <p class="text-xl text-gray-900 mb-2">Winner: <strong><%= game.winner.nickname %></strong></p>
        <p class="text-gray-600">Final Score: <%= game.winner.score %></p>
      <% end %>
      
      <div class="mt-6">
        <%= link_to "Play Again", new_game_path, 
            class: "bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition" %>
      </div>
    <% end %>
  </div>
</div>